<!DOCTYPE html>
<html lang="fr" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- SEO Meta Tags -->
    <title>{% block title %}EcoTrace - Votre compagnon pour un mode de vie durable{% endblock %}</title>
    <meta name="description" content="{% block description %}Mesurez, comprenez et réduisez votre empreinte carbone avec EcoTrace. Transformez votre mode de vie grâce à nos outils simples et efficaces.{% endblock %}">
    <meta name="keywords" content="empreinte carbone, écologie, développement durable, EcoTrace, environnement, CO2">
    <meta name="author" content="EcoTrace">
    <meta name="msapplication-TileColor" content="#10b981">
    <meta name="msapplication-TileImage" content="{{ url_for('static', filename='favicon/ms-icon-144x144.png') }}">
    <meta name="theme-color" content="#10b981">
    <link rel="apple-touch-icon" sizes="57x57" href="{{ url_for('static', filename='favicon/apple-icon-57x57.png') }}">
    <link rel="apple-touch-icon" sizes="60x60" href="{{ url_for('static', filename='favicon/apple-icon-60x60.png') }}">
    <link rel="apple-touch-icon" sizes="72x72" href="{{ url_for('static', filename='favicon/apple-icon-72x72.png') }}">
    <link rel="apple-touch-icon" sizes="76x76" href="{{ url_for('static', filename='favicon/apple-icon-76x76.png') }}">
    <link rel="apple-touch-icon" sizes="114x114" href="{{ url_for('static', filename='favicon/apple-icon-114x114.png') }}">
    <link rel="apple-touch-icon" sizes="120x120" href="{{ url_for('static', filename='favicon/apple-icon-120x120.png') }}">
    <link rel="apple-touch-icon" sizes="144x144" href="{{ url_for('static', filename='favicon/apple-icon-144x144.png') }}">
    <link rel="apple-touch-icon" sizes="152x152" href="{{ url_for('static', filename='favicon/apple-icon-152x152.png') }}">
    <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='favicon/apple-icon-180x180.png') }}">
    <link rel="icon" type="image/png" sizes="192x192"  href="{{ url_for('static', filename='favicon/android-icon-192x192.png') }}">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='favicon/favicon-32x32.png') }}">
    <link rel="icon" type="image/png" sizes="96x96" href="{{ url_for('static', filename='favicon/favicon-96x96.png') }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='favicon/favicon-16x16.png') }}">
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon/favicon.ico') }}">
    <link rel="manifest" href="{{ url_for('static', filename='favicon/manifest.json') }}">

    <!-- Police Inter -->
    <style>
        /* Police Inter variable pour tous les poids */
        @font-face {
            font-family: 'Inter';
            src: url('{{ url_for('static', filename='fonts/Inter-VariableFont_opsz,wght.ttf') }}') format('truetype-variations');
            font-weight: 100 900;
            font-style: normal;
            font-display: swap;
        }
        @font-face {
            font-family: 'Inter';
            src: url('{{ url_for('static', filename='fonts/Inter-Italic-VariableFont_opsz,wght.ttf') }}') format('truetype-variations');
            font-weight: 100 900;
            font-style: italic;
            font-display: swap;
        }
        /* Fallbacks pour navigateurs plus anciens */
        @font-face {
            font-family: 'Inter';
            src: url('{{ url_for('static', filename='fonts/static/Inter_18pt-Regular.ttf') }}') format('truetype');
            font-weight: 400;
            font-style: normal;
            font-display: swap;
        }
        
        @font-face {
            font-family: 'Inter';
            src: url('{{ url_for('static', filename='fonts/static/Inter_18pt-Medium.ttf') }}') format('truetype');
            font-weight: 500;
            font-style: normal;
            font-display: swap;
        }
        
        @font-face {
            font-family: 'Inter';
            src: url('{{ url_for('static', filename='fonts/static/Inter_18pt-SemiBold.ttf') }}') format('truetype');
            font-weight: 600;
            font-style: normal;
            font-display: swap;
        }
    
        @font-face {
            font-family: 'Inter';
            src: url('{{ url_for('static', filename='fonts/static/Inter_18pt-Bold.ttf') }}') format('truetype');
            font-weight: 700;
            font-style: normal;
            font-display: swap;
        }
    
        @font-face {
            font-family: 'Inter';
            src: url('{{ url_for('static', filename='fonts/static/Inter_18pt-Black.ttf') }}') format('truetype');
            font-weight: 900;
            font-style: normal;
            font-display: swap;
        }
        /* Styles globaux */
        * {
            font-feature-settings: 'cv11', 'ss01';
            font-variant-numeric: tabular-nums;
        }
        html {
            scroll-padding-top: 4rem;
        }
        body {
            font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        /* Sélection de texte personnalisée */
        ::selection {
            background-color: #10b981;
            color: white;
        }
        ::-moz-selection {
            background-color: #10b981;
            color: white;
        }
        /* Scrollbar personnalisée */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
        /* Animation de chargement */
        .loading-spinner {
            border: 2px solid #f3f4f6;
            border-top: 2px solid #10b981;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        /* Focus personnalisé */
        .focus-ring:focus {
            outline: 2px solid #10b981;
            outline-offset: 2px;
        }
        /* Transitions globales */
        .transition-all {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
    </style>

    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    
    <!-- CSS additionnels -->
    {% block extra_css %}{% endblock %}
</head>

<body class="font-inter bg-white text-gray-900 antialiased">
    <!-- Skip to main content (accessibilité) -->
    <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-emerald-600 text-white px-4 py-2 rounded-lg z-50">
        Aller au contenu principal
    </a>

    <!-- Loader (optionnel) -->
    <div id="page-loader" class="fixed inset-0 bg-white z-50 flex items-center justify-center transition-opacity duration-500">
        <div class="text-center">
            <div class="w-12 h-12 bg-gradient-to-r from-emerald-500 to-teal-600 rounded-xl flex items-center justify-center shadow-lg mb-4 mx-auto">
                <svg fill="none" stroke="currentColor" class="w-6 h-6 text-white animate-bounce-gentle" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 0 1 2 2v1a2 2 0 0 0 2 2 2 2 0 0 1 2 2v2.945M8 3.935V5.5A2.5 2.5 0 0 0 10.5 8h.5a2 2 0 0 1 2 2 2 2 0 1 0 4 0 2 2 0 0 1 2-2h1.064M15 20.488V18a2 2 0 0 1 2-2h3.064M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0z"/></svg>
            </div>
            <div class="loading-spinner mx-auto"></div>
        </div>
    </div>

    <!-- Flash Messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div id="flash-messages" class="fixed top-20 right-4 z-40 space-y-2">
                {% for category, message in messages %}
                    <div class="flash-message bg-white border-l-4 p-4 rounded-lg shadow-lg max-w-sm animate-slide-up
                        {% if category == 'error' %}border-red-500 text-red-700
                        {% elif category == 'warning' %}border-yellow-500 text-yellow-700
                        {% elif category == 'success' %}border-emerald-500 text-emerald-700
                        {% else %}border-blue-500 text-blue-700{% endif %}">
                        
                        <div class="flex items-center justify-between">
                            <div class="flex items-center flex-1">
                                {% if category == 'error' %}
                                    <svg fill="currentColor" class="w-5 h-5 mr-2 flex-shrink-0" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0zm-7 4a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-1-9a1 1 0 0 0-1 1v4a1 1 0 1 0 2 0V6a1 1 0 0 0-1-1z" clip-rule="evenodd"/></svg>
                                {% elif category == 'warning' %}
                                    <svg fill="currentColor" class="w-5 h-5 mr-2 flex-shrink-0" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-1-8a1 1 0 0 0-1 1v3a1 1 0 0 0 2 0V6a1 1 0 0 0-1-1z" clip-rule="evenodd"/></svg>
                                {% elif category == 'success' %}
                                    <svg fill="currentColor" class="w-5 h-5 mr-2 flex-shrink-0" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 0 1 0 1.414l-8 8a1 1 0 0 1-1.414 0l-4-4a1 1 0 0 1 1.414-1.414L8 12.586l7.293-7.293a1 1 0 0 1 1.414 0z" clip-rule="evenodd"/></svg>
                                {% else %}
                                    <svg fill="currentColor" class="w-5 h-5 mr-2 flex-shrink-0" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0zm-7-4a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM9 9a1 1 0 0 0 0 2v3a1 1 0 0 0 1 1h1a1 1 0 1 0 0-2v-3a1 1 0 0 0-1-1H9z" clip-rule="evenodd"/></svg>
                                {% endif %}
                                <span class="text-sm font-medium">{{ message }}</span>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}

    <!-- ENTETE -->
    <header class="relative z-30">
        {% include "partials/navbar.html" %}
    </header>

    <!-- CONTENU PRINCIPAL -->
    <main id="main-content" class="relative">
        <!-- Section head -->
        {% block section_head %}{% endblock %}
        
        <!-- Section content -->
        {% block section_contents %}{% endblock %}
    </main>

    <!-- PIEDS DE PAGE -->
    <footer>
        {% include "partials/footer.html" %}
    </footer>

    <!-- Bouton retour en haut -->
    <button id="back-to-top" class="fixed bottom-8 right-8 bg-gradient-to-r from-emerald-500 to-teal-600 text-white w-12 h-12 rounded-full shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300 opacity-0 pointer-events-none z-40 flex items-center justify-center">
        <svg fill="none" stroke="currentColor" class="w-5 h-5" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m5 10 7-7m0 0 7 7m-7-7v18"/></svg>
    </button>

    <!-- Scripts globaux -->
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>

    <!-- Scripts additionnels -->
    {% block block_scripts %}{% endblock %}
</body>
</html>